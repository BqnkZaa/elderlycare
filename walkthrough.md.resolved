# Elderly Care Management Platform - Walkthrough

‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ‡∏≠‡∏õ‡∏ó. (‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏õ‡∏Å‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô) ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Next.js 16, TypeScript, MySQL ‡πÅ‡∏•‡∏∞ Prisma 7

---

## ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

```mermaid
graph TB
    subgraph Frontend
        A[Next.js App Router] --> B[React Components]
        B --> C[UI Components]
    end
    
    subgraph Backend
        D[Server Actions] --> E[Prisma ORM]
        F[API Routes] --> E
        G[NextAuth.js] --> E
    end
    
    subgraph Database
        E --> H[(MySQL)]
    end
    
    subgraph Services
        I[Notification Service] --> E
        J[Encryption Service]
    end
    
    A --> D
    A --> F
    A --> G
    D --> J
```

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ

| Directory | Description |
|-----------|-------------|
| `src/app/` | Next.js App Router pages and API routes |
| `src/actions/` | Server Actions for CRUD operations |
| `src/components/` | Reusable React components |
| `src/lib/` | Utilities, validations, encryption |
| `src/services/` | Business logic services |
| `src/generated/` | Prisma generated client |
| `prisma/` | Database schema |

---

## ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### 1. Login Page (`/login`)
- Authentication ‡∏î‡πâ‡∏ß‡∏¢ NextAuth.js Credentials Provider
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Admin ‡πÅ‡∏•‡∏∞ Staff roles

### 2. Dashboard (`/dashboard`)
- ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏, ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ, ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£
- Quick actions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### 3. Elderly Profiles (`/dashboard/elderly`)
- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏‡∏û‡∏£‡πâ‡∏≠‡∏° pagination
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (77 ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î)
- ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô

### 4. Profile Detail (`/dashboard/elderly/[id]`)
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà, ‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏â‡∏∏‡∏Å‡πÄ‡∏â‡∏¥‡∏ô
- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û: ‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß, ‡∏¢‡∏≤, ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡πâ
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î

### 5. Add/Edit Profile (`/dashboard/elderly/new`)
- ‡∏ü‡∏≠‡∏£‡πå‡∏° 20+ fields ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- Validation ‡∏î‡πâ‡∏ß‡∏¢ Zod + React Hook Form

---

## Data Models

```mermaid
erDiagram
    User ||--o{ DailyLog : records
    ElderlyProfile ||--o{ DailyLog : has
    ElderlyProfile ||--o{ AlertLog : triggers
    
    User {
        string id PK
        string email UK
        string password
        string name
        enum role
        boolean isActive
    }
    
    ElderlyProfile {
        string id PK
        string nationalId UK
        string firstName
        string lastName
        date dateOfBirth
        enum gender
        enum bloodType
        string province
        enum careLevel
        enum mobilityStatus
    }
    
    DailyLog {
        string id PK
        string elderlyId FK
        date date
        json vitals
        enum mood
        enum mealIntake
        enum sleepQuality
        boolean medicationsTaken
    }
    
    AlertLog {
        string id PK
        string elderlyId
        string alertType
        string message
        string status
    }
```

---

## ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

### üîê PDPA Compliance
- **Encryption**: ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ ‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ AES-256
- **Masking**: ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 4 ‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢

```typescript
// src/lib/encryption.ts
export function encrypt(text: string): string
export function decrypt(ciphertext: string): string
export function maskSensitiveData(data: string, visibleChars: number): string
```

### üìä Server Actions
‡πÉ‡∏ä‡πâ Next.js Server Actions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö CRUD operations:

| Action | File | Description |
|--------|------|-------------|
| `createElderlyProfile` | [elderly.actions.ts](file:///d:/Workshop/elderlycare/src/actions/elderly.actions.ts) | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° encryption |
| `getElderlyProfiles` | [elderly.actions.ts](file:///d:/Workshop/elderlycare/src/actions/elderly.actions.ts) | ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏£‡πâ‡∏≠‡∏° decrypt ‡πÅ‡∏•‡∏∞ pagination |
| `updateElderlyProfile` | [elderly.actions.ts](file:///d:/Workshop/elderlycare/src/actions/elderly.actions.ts) | ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• |
| `createDailyLog` | [daily-log.actions.ts](file:///d:/Workshop/elderlycare/src/actions/daily-log.actions.ts) | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô |

### üîî Notification Service
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡∏∞‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö
- Provider Interface Pattern ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö SMS/LINE integration
- Cron job endpoint: `GET /api/cron/daily-check`

---

## Tech Stack

| Layer | Technology |
|-------|------------|
| **Framework** | Next.js 16.1.6 (App Router, Turbopack) |
| **Language** | TypeScript 5.x |
| **Database** | MySQL (via Prisma 7.x) |
| **ORM** | Prisma 7.3.0 + MariaDB Adapter |
| **Auth** | NextAuth.js 5 (Credentials) |
| **Validation** | Zod 4 |
| **Forms** | React Hook Form |
| **Styling** | Tailwind CSS 4 |
| **Icons** | Lucide React |

---

## Environment Variables

```env
# Database
DATABASE_URL="mysql://user:pass@host:3306/elderlycare"
DB_HOST="localhost"
DB_PORT="3306"
DB_USER="root"
DB_PASSWORD="password"
DB_NAME="elderlycare"

# Auth
NEXTAUTH_SECRET="your-secret-min-32-chars"
NEXTAUTH_URL="http://localhost:3000"

# Security
CRON_SECRET="your-cron-secret"
ENCRYPTION_KEY="your-32-character-key"
```

---

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. Install Dependencies
```bash
npm install
```

### 2. Setup Database
```bash
npx prisma generate
npx prisma migrate dev --name init
```

### 3. Seed Admin User
‡πÄ‡∏Ç‡πâ‡∏≤ `http://localhost:3000/api/seed` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á admin user:
- Email: `admin@elderlycare.local`
- Password: `admin123`

### 4. Run Development Server
```bash
npm run dev
```

---

## API Endpoints

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/api/auth/[...nextauth]` | * | NextAuth.js handlers |
| `/api/seed` | GET | ‡∏™‡∏£‡πâ‡∏≤‡∏á admin user ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô |
| `/api/cron/daily-check` | GET | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î/‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö |

---

## Security Features

1. **Authentication** - NextAuth.js with bcrypt password hashing
2. **Authorization** - Role-based (ADMIN, STAFF) via middleware
3. **Encryption** - AES-256 for sensitive data
4. **CSRF Protection** - Built-in with Server Actions
5. **Input Validation** - Zod schemas on all forms

---

## ‡∏™‡∏£‡∏∏‡∏õ

‡∏£‡∏∞‡∏ö‡∏ö Elderly Care Management Platform ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏° deploy ‡∏ö‡∏ô Plesk hosting ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö:
- ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ 20+ fields
- ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô (vital signs, mood, meals, sleep)
- ‚úÖ 77 ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢
- ‚úÖ PDPA-compliant encryption
- ‚úÖ Notification service ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î/‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö
- ‚úÖ Role-based authentication
